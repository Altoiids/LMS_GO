<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta http-equiv="X-UA-Compatible" content="IE=edge" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<link rel="stylesheet" href="/css/adminBooks.css" />
		<link
			href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"
			rel="stylesheet"
			integrity="sha384-9ndCyUaIbzAi2FUVXJi0CjmCapSmO7SnpJef0486qhLnuZ2cdeRhO02iuK6FUUVM"
			crossorigin="anonymous"
		/>
		
		<title>Books</title>
	</head>
	<body>
		{{ template "admin_navbar.html" }}
		
		<div class="container">
			<h1 class="text-center mt-3 mb-3">Welcome to Luminex Library</h1>

			<div class="card">
				<div class="card-header">Add New Book</div>
				<div class="card-body">
					<form method="POST" action="/admin/addbook">
						<div class="row">
							<div class="col-md-6">
								<div class="mb-3">
									<label>Book Name</label>
									<input
										type="text"
										name="title"
										id="book_name"
										class="form-control"
									/>
								</div>
							</div>
							<div class="col-md-6">
								<div class="mb-3">
									<label>Publisher</label>
									<input
										type="text"
										name="author"
										id="publisher"
										class="form-control"
									/>
								</div>
							</div>
						</div>
						<div class="row">
						<div class="col-md-6">
							<div class="mb-3">
								<label>ISBN</label>
								<input
									type="text"
									name="author"
									id="isbn"
									class="form-control"
								/>
							</div>
						</div>
						
							<div class="col-md-6">
								<div class="mb-3">
									<label>Edition</label>
									<input
										type="number"
										name="quantity"
										id="edition"
										min="1"
										class="form-control"
									/>
								</div>
							</div>
						</div>
						<div class="row">
							<div class="col-md-6">
								<div class="mb-3">
									<label>Quantity</label>
									<input
										type="number"
										name="author"
										id="quantity"
										class="form-control"
									/>
								</div>
							</div>
							</div>
						<div class="mb-3">
							<button onclick="submitForm()" class = "btn btn-primary">Add Book</button>
						</div>
					</form>
				</div>
			</div>
		</div>
		
		<script>
            function submitForm() {
				console.log("helloo")
                const book_name = document.getElementById('book_name').value;
                const publisher = document.getElementById('publisher').value;
                const isbn = document.getElementById('isbn').value;
                const editions = document.getElementById('edition').value;
				const edition = parseInt(editions, 10);
				const quantitys = document.getElementById('quantity').value;
				const quantity = parseInt(quantitys, 10);
              
                const data = {
                  book_name: book_name,
                  publisher:publisher,
                  isbn:isbn,
                  edition:edition,
				  quantity: quantity
                };
				console.log(data);
              
                fetch('/admin/addbook', {
                  method: 'POST',
                  headers: {
                    'Content-Type': 'application/json'
                  },
                  body: JSON.stringify(data)
                })
                .then(response => {
                  if (response.ok) {
                    console.log('API request successful!');
                    window.location.href = '/admin/addbook';
                  } else {
                    console.log('API request failed!');
                  }
                })
                .catch(error => {
                  console.error('Error occurred:', error);
                });
              }
        
	</script>
	</body>
</html>